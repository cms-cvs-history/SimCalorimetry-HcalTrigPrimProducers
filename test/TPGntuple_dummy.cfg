process digitize = 
{
	source = EmptySource
        {
        	untracked int32 maxEvents = 200
        }
        
        include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
        include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
        es_module = CaloTowerConstituentsMapBuilder {
                untracked string MapFile="Geometry/CaloTopology/data/CaloTowerEEGeometric.map.gz"
       }
        include "Geometry/CaloEventSetup/data/CaloTopology.cfi"
        es_module = HcalTopologyIdealEP {}
        include "CalibCalorimetry/HcalPlugins/data/hardwired_conditions.cfi"

	include "SimCalorimetry/HcalSimProducers/data/hcaldigi.cfi"
	include "SimCalorimetry/HcalTrigPrimProducers/data/hcaltpdigi.cff"

	include "CalibCalorimetry/CaloTPG/data/CaloTPGTranscoder.cfi"

	module g4SimHits = HcalDummyHitProducer
	{
		double step_size = 0.000
	}

	module mix = MixingModule
   	{
      		int32 bunchspace = 25
   	}

	replace hcalTriggerPrimitiveDigis.peakFilter = true
	
        module ntupler  = TPGntupler {}
	
//	module out = PoolOutputModule
// 	{
//		untracked string fileName = '/uscms_data/d1/aurisano/Full-stepped-peak-nodps.root'
//	}

	path p = {g4SimHits, mix, hcalDigis, hcalTriggerPrimitiveDigis, ntupler}

//	endpath outpath =
//  	{
// 		out	
//  	}	

}
