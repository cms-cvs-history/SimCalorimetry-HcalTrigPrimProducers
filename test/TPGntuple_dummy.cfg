process digitize = 
{
	source = EmptySource
        {
        	untracked int32 maxEvents = 5000
        }
        
        include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
        include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
        es_module = CaloTowerConstituentsMapBuilder {
                untracked string MapFile="Geometry/CaloTopology/data/CaloTowerEEGeometric.map.gz"
       }
        include "Geometry/CaloEventSetup/data/CaloTopology.cfi"
        es_module = HcalTopologyIdealEP {}
        include "CalibCalorimetry/HcalPlugins/data/hardwired_conditions.cfi"

	include "SimCalorimetry/HcalSimProducers/data/hcaldigi.cfi"
	include "SimCalorimetry/HcalTrigPrimProducers/data/hcaltpdigi.cff"

	include "CalibCalorimetry/CaloTPG/data/CaloTPGTranscoder.cfi"

	include "RecoLocalCalo/HcalRecProducers/data/HcalSimpleReconstructor-hbhe.cfi"
	include "RecoLocalCalo/HcalRecProducers/data/HcalSimpleReconstructor-hf.cfi"

	module g4SimHits = HcalDummyHitProducer
	{
		double step_size = 0.005
		double energy_start = 0
	}

	module mix = MixingModule
   	{
      		int32 bunchspace = 25
   	}

	replace hcalTriggerPrimitiveDigis.peakFilter = true
	
        module ntupler  = TPGntupler {}

	path p = {g4SimHits, mix, hcalDigis, hcalTriggerPrimitiveDigis, hbhereco, hfreco, ntupler}
}
